CREATE SCHEMA main;;
CREATE TABLE actor(actor_id DOUBLE PRIMARY KEY, first_name VARCHAR NOT NULL, last_name VARCHAR NOT NULL, last_update TIMESTAMP NOT NULL);;
CREATE TABLE country(country_id BIGINT PRIMARY KEY, country VARCHAR NOT NULL, last_update TIMESTAMP);;
CREATE TABLE city(city_id BIGINT PRIMARY KEY, city VARCHAR NOT NULL, country_id BIGINT NOT NULL, last_update TIMESTAMP NOT NULL);;
CREATE TABLE address(address_id BIGINT PRIMARY KEY, address VARCHAR NOT NULL, address2 VARCHAR DEFAULT(NULL), district VARCHAR NOT NULL, city_id BIGINT NOT NULL, postal_code VARCHAR DEFAULT(NULL), phone VARCHAR NOT NULL, last_update TIMESTAMP NOT NULL);;
CREATE TABLE "language"(language_id BIGINT PRIMARY KEY, "name" VARCHAR NOT NULL, last_update TIMESTAMP NOT NULL);;
CREATE TABLE category(category_id BIGINT PRIMARY KEY, "name" VARCHAR NOT NULL, last_update TIMESTAMP NOT NULL);;
CREATE TABLE customer(customer_id BIGINT PRIMARY KEY, store_id BIGINT NOT NULL, first_name VARCHAR NOT NULL, last_name VARCHAR NOT NULL, email VARCHAR DEFAULT(NULL), address_id BIGINT NOT NULL, active VARCHAR DEFAULT('Y') NOT NULL, create_date TIMESTAMP NOT NULL, last_update TIMESTAMP NOT NULL);;
CREATE TABLE film(film_id BIGINT PRIMARY KEY, title VARCHAR NOT NULL, description VARCHAR DEFAULT(NULL), release_year VARCHAR DEFAULT(NULL), language_id BIGINT NOT NULL, original_language_id BIGINT DEFAULT(NULL), rental_duration BIGINT DEFAULT(3) NOT NULL, rental_rate DOUBLE DEFAULT(4.99) NOT NULL, length BIGINT DEFAULT(NULL), replacement_cost DOUBLE DEFAULT(19.99) NOT NULL, rating VARCHAR DEFAULT('G'), special_features VARCHAR DEFAULT(NULL), last_update TIMESTAMP NOT NULL);;
CREATE TABLE film_actor(actor_id BIGINT, film_id BIGINT, last_update TIMESTAMP NOT NULL, PRIMARY KEY(actor_id, film_id));;
CREATE TABLE film_category(film_id BIGINT, category_id BIGINT, last_update TIMESTAMP NOT NULL, PRIMARY KEY(film_id, category_id));;
CREATE TABLE film_text(film_id BIGINT PRIMARY KEY, title VARCHAR NOT NULL, description VARCHAR);;
CREATE TABLE inventory(inventory_id BIGINT PRIMARY KEY, film_id BIGINT NOT NULL, store_id BIGINT NOT NULL, last_update TIMESTAMP NOT NULL);;
CREATE TABLE staff(staff_id BIGINT PRIMARY KEY, first_name VARCHAR NOT NULL, last_name VARCHAR NOT NULL, address_id BIGINT NOT NULL, picture BLOB DEFAULT(NULL), email VARCHAR DEFAULT(NULL), store_id BIGINT NOT NULL, active BIGINT DEFAULT(1) NOT NULL, username VARCHAR NOT NULL, "password" VARCHAR DEFAULT(NULL), last_update TIMESTAMP NOT NULL);;
CREATE TABLE store(store_id BIGINT PRIMARY KEY, manager_staff_id BIGINT NOT NULL, address_id BIGINT NOT NULL, last_update TIMESTAMP NOT NULL);;
CREATE TABLE payment(payment_id BIGINT PRIMARY KEY, customer_id BIGINT NOT NULL, staff_id BIGINT NOT NULL, rental_id BIGINT DEFAULT(NULL), amount DOUBLE NOT NULL, payment_date TIMESTAMP NOT NULL, last_update TIMESTAMP NOT NULL);;
CREATE TABLE rental(rental_id BIGINT PRIMARY KEY, rental_date TIMESTAMP NOT NULL, inventory_id BIGINT NOT NULL, customer_id BIGINT NOT NULL, return_date TIMESTAMP DEFAULT(NULL), staff_id BIGINT NOT NULL, last_update TIMESTAMP NOT NULL);;
CREATE TABLE large_table(id BIGINT, hash VARCHAR, rand DOUBLE, "value" DOUBLE);;
CREATE INDEX idx_actor_last_name ON actor(last_name);;
CREATE INDEX idx_fk_country_id ON city(country_id);;
CREATE INDEX idx_fk_city_id ON address(city_id);;
CREATE INDEX idx_customer_fk_store_id ON customer(store_id);;
CREATE INDEX idx_customer_fk_address_id ON customer(address_id);;
CREATE INDEX idx_customer_last_name ON customer(last_name);;
CREATE INDEX idx_fk_language_id ON film(language_id);;
CREATE INDEX idx_fk_original_language_id ON film(original_language_id);;
CREATE INDEX idx_fk_film_actor_film ON film_actor(film_id);;
CREATE INDEX idx_fk_film_actor_actor ON film_actor(actor_id);;
CREATE INDEX idx_fk_film_category_film ON film_category(film_id);;
CREATE INDEX idx_fk_film_category_category ON film_category(category_id);;
CREATE INDEX idx_fk_film_id ON inventory(film_id);;
CREATE INDEX idx_fk_film_id_store_id ON inventory(store_id, film_id);;
CREATE INDEX idx_fk_staff_store_id ON staff(store_id);;
CREATE INDEX idx_fk_staff_address_id ON staff(address_id);;
CREATE INDEX idx_store_fk_manager_staff_id ON store(manager_staff_id);;
CREATE INDEX idx_fk_store_address ON store(address_id);;
CREATE INDEX idx_fk_staff_id ON payment(staff_id);;
CREATE INDEX idx_fk_customer_id ON payment(customer_id);;
CREATE INDEX idx_rental_fk_inventory_id ON rental(inventory_id);;
CREATE INDEX idx_rental_fk_customer_id ON rental(customer_id);;
CREATE INDEX idx_rental_fk_staff_id ON rental(staff_id);;
CREATE UNIQUE INDEX idx_rental_uq ON rental(rental_date, inventory_id, customer_id);;

